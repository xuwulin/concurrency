# 线程基础知识

## 线程的生命周期

![线程的生命周期](./images/线程的生命周期.jpg)

### 线程的生命周期大致分为5个阶段

- New
- Runnable
- Running
- Blocked
- Terminated/dead

#### 1.new状态

当我们用关键字new创建一个Thread对象时，此时它并不处于执行状态，因为没有调用start()方法启动该线程，name线程的new状态，准确地说，它只是Thread对象的状态，因为在没有start之前，该线程根本不存在，与你用关键字new创建一个普通的java对象没有什么区别。

new状态通过start()方法进入runnable状态

#### 2.Runnable状态

线程的运行与否与进程一样都要听令于CPU的调度，那么我们把这个中间状态称为可执行状态（Runnable），也就是说它具备执行的资格，但是并没有真正地执行而是在等待CPU的调度。

runnable的线程只能意外终止或进入running转态

#### 3.Running状态

一旦CPU通过轮询或者其它方式从任务可执行队列中选中了线程，那么他才能真正地执行自己的逻辑代码，需要说明的是一个正在running状态的线程事实上也是runnable的，但是反过来则不成立。

在该状态中，线程的状态可以发生如下的状态转换：

- 直接进入terminated/dead状态，比如调用jdk已经不推荐使用的stop方法或者判断某个逻辑标识
- 进入blocked状态，比如调用了sleep，或者wait方法而加入waitSet中。
- 进行某个阻塞的IO操作，比如因网络数据的读写而进入了blocked状态。
- 获取某个锁资源，从而加入到该锁的阻塞队列中而进入blocked状态
- 由于CPU的调度器轮询使该线程放弃执行进入runnable状态
- 线程主动调用yield方法，放弃CPU执行权，进入runnable状态。

